"use strict";(()=>{var e={};e.id=788,e.ids=[788],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},3684:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>c,runtime:()=>l});var n=r(9303),i=r(8716),o=r(670),a=r(7070),u=r(728),p=r(5456);let l="nodejs";async function c(e){try{let t=(0,p.v6)(e);if(!t)return a.NextResponse.json({user:null},{status:200});let r=await u._.user.findUnique({where:{id:t.userId},include:{profile:!0}});if(!r)return a.NextResponse.json({user:null},{status:200});return a.NextResponse.json({user:{id:r.id,email:r.email,role:r.role,profile:r.profile}})}catch(e){return console.error("me error",e),a.NextResponse.json({error:"failed to fetch session"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/me/route",pathname:"/api/auth/me",filename:"route",bundlePath:"app/api/auth/me/route"},resolvedPagePath:"C:\\Users\\user\\Documents\\coding\\userhythm\\backend\\src\\app\\api\\auth\\me\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h}=d,f="/api/auth/me/route";function g(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},5456:(e,t,r)=>{r.d(t,{B3:()=>u,Rf:()=>l,Uj:()=>p,v6:()=>c});var s=r(1482),n=r.n(s),i=r(1615);let o="ur_session",a=process.env.SESSION_SECRET||"dev-secret-change-me",u=e=>n().sign(e,a,{expiresIn:604800}),p=e=>{(0,i.cookies)().set(o,e,{httpOnly:!0,sameSite:"strict",secure:!0,path:"/",maxAge:604800})},l=()=>{(0,i.cookies)().set(o,"",{httpOnly:!0,sameSite:"strict",secure:!0,path:"/",maxAge:0})},c=e=>{let t=e.cookies.get(o)?.value;if(!t)return null;try{return n().verify(t,a)}catch{return null}}},728:(e,t,r)=>{r.d(t,{_:()=>n});let s=require("@prisma/client"),n=global.prisma||new s.PrismaClient({})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,261],()=>r(3684));module.exports=s})();