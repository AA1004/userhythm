"use strict";(()=>{var e={};e.id=271,e.ids=[271],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5315:e=>{e.exports=require("path")},8678:e=>{e.exports=import("pg")},2761:e=>{e.exports=require("node:async_hooks")},2254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},5673:e=>{e.exports=require("node:events")},7561:e=>{e.exports=require("node:fs")},612:e=>{e.exports=require("node:os")},9411:e=>{e.exports=require("node:path")},8869:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h});var o=r(9303),a=r(8716),n=r(670),i=r(7497),p=e([i]);i=(p.then?(await p)():p)[0];let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/charts/route",pathname:"/api/charts",filename:"route",bundlePath:"app/api/charts/route"},resolvedPagePath:"C:\\Users\\user\\Documents\\coding\\userhythm\\backend\\src\\app\\api\\charts\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:l}=u,m="/api/charts/route";function c(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}s()}catch(e){s(e)}})},7497:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>i});var o=r(7070),a=r(3538),n=e([a]);async function i(e){try{let{searchParams:t}=new URL(e.url),r=t.get("search")?.trim()||"",s=t.get("sortBy")||"created_at",n=t.get("sortOrder")||"desc",i=Math.min(parseInt(t.get("limit")||"12",10)||12,50),p=parseInt(t.get("offset")||"0",10)||0,c=r?{OR:[{title:{contains:r,mode:"insensitive"}},{author:{contains:r,mode:"insensitive"}},{description:{contains:r,mode:"insensitive"}}]}:{},[u,d]=await Promise.all([a._.chart.findMany({where:c,orderBy:"play_count"===s?{playCount:n}:"title"===s?{title:n}:{createdAt:n},skip:p,take:i}),a._.chart.count({where:c})]);return o.NextResponse.json({charts:u,total:d})}catch(e){return console.error("charts list error",e),o.NextResponse.json({error:"failed to load charts"},{status:500})}}a=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,901,538],()=>r(8869));module.exports=s})();